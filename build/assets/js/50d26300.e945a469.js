"use strict";(globalThis.webpackChunkphysical_ai_textbook=globalThis.webpackChunkphysical_ai_textbook||[]).push([[4999],{8453:(n,e,o)=>{o.d(e,{R:()=>i,x:()=>s});var a=o(6540);const t={},r=a.createContext(t);function i(n){const e=a.useContext(r);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:i(n.components),a.createElement(r.Provider,{value:e},n.children)}},9613:(n,e,o)=>{o.r(e),o.d(e,{assets:()=>c,contentTitle:()=>i,default:()=>m,frontMatter:()=>r,metadata:()=>s,toc:()=>l});var a=o(4848),t=o(8453);const r={title:"Launch Files in ROS 2"},i="Launch Files in ROS 2",s={id:"ros2-packages/launch-files",title:"Launch Files in ROS 2",description:"Introduction to Launch Systems",source:"@site/docs/physical-ai/ros2-packages/launch-files.mdx",sourceDirName:"ros2-packages",slug:"/ros2-packages/launch-files",permalink:"/ros2-packages/launch-files",draft:!1,unlisted:!1,editUrl:"https://github.com/MuhammadFuzail591/new-book-physical-ai/tree/main/docs/physical-ai/ros2-packages/launch-files.mdx",tags:[],version:"current",frontMatter:{title:"Launch Files in ROS 2"},sidebar:"tutorialSidebar",previous:{title:"Building ROS 2 Packages",permalink:"/ros2-packages/building-packages"},next:{title:"Chapter 5 Summary - Building ROS 2 Packages, Launch Files & Parameters",permalink:"/ros2-packages/chapter-summary"}},c={},l=[{value:"Introduction to Launch Systems",id:"introduction-to-launch-systems",level:2},{value:"Launch File Fundamentals",id:"launch-file-fundamentals",level:3},{value:"Python Launch Files",id:"python-launch-files",level:2},{value:"Advanced Launch File Patterns",id:"advanced-launch-file-patterns",level:2},{value:"Multi-Robot Systems",id:"multi-robot-systems",level:3},{value:"Composable Nodes Launch",id:"composable-nodes-launch",level:3},{value:"XML Launch Files",id:"xml-launch-files",level:2},{value:"Launch File Best Practices",id:"launch-file-best-practices",level:2},{value:"Parameter Management in Launch Files",id:"parameter-management-in-launch-files",level:3},{value:"Conditional Launch",id:"conditional-launch",level:3},{value:"Launch File Testing and Validation",id:"launch-file-testing-and-validation",level:2},{value:"Unit Testing Launch Files",id:"unit-testing-launch-files",level:3}];function u(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.h1,{id:"launch-files-in-ros-2",children:"Launch Files in ROS 2"}),"\n",(0,a.jsx)(e.h2,{id:"introduction-to-launch-systems",children:"Introduction to Launch Systems"}),"\n",(0,a.jsx)(e.p,{children:"Launch files in ROS 2 provide a powerful mechanism to start multiple nodes with specific configurations simultaneously. Unlike ROS 1, ROS 2 uses a more flexible and programmable launch system that supports both XML and Python formats, with Python being the recommended approach due to its flexibility and programmability."}),"\n",(0,a.jsx)(e.h3,{id:"launch-file-fundamentals",children:"Launch File Fundamentals"}),"\n",(0,a.jsx)(e.p,{children:"Launch files allow you to define complex robotic systems with multiple nodes, parameters, and configurations in a single file. This is essential for:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Starting multiple nodes with specific parameters"}),"\n",(0,a.jsx)(e.li,{children:"Managing namespaces for multi-robot systems"}),"\n",(0,a.jsx)(e.li,{children:"Setting up complex system configurations"}),"\n",(0,a.jsx)(e.li,{children:"Managing dependencies between nodes"}),"\n",(0,a.jsx)(e.li,{children:"Handling system startup and shutdown"}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"python-launch-files",children:"Python Launch Files"}),"\n",(0,a.jsx)(e.p,{children:"Python launch files offer maximum flexibility and are the recommended approach for complex systems:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"# launch/robot_system.launch.py\nfrom launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument, IncludeLaunchDescription, TimerAction\nfrom launch.conditions import IfCondition\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\nfrom launch.substitutions import LaunchConfiguration, PathJoinSubstitution\nfrom launch_ros.actions import Node, ComposableNodeContainer\nfrom launch_ros.descriptions import ComposableNode\nfrom launch_ros.substitutions import FindPackageShare\nimport os\n\ndef generate_launch_description():\n    # Declare launch arguments\n    declare_use_sim_time = DeclareLaunchArgument(\n        'use_sim_time',\n        default_value='false',\n        description='Use simulation (Gazebo) clock if true'\n    )\n\n    declare_robot_name = DeclareLaunchArgument(\n        'robot_name',\n        default_value='default_robot',\n        description='Name of the robot'\n    )\n\n    declare_config_dir = DeclareLaunchArgument(\n        'config_dir',\n        default_value=PathJoinSubstitution([\n            FindPackageShare('my_robot_package'),\n            'config'\n        ]),\n        description='Path to config directory'\n    )\n\n    # Get launch configuration\n    use_sim_time = LaunchConfiguration('use_sim_time')\n    robot_name = LaunchConfiguration('robot_name')\n    config_dir = LaunchConfiguration('config_dir')\n\n    # Robot controller node\n    robot_controller_node = Node(\n        package='my_robot_package',\n        executable='robot_controller',\n        name='robot_controller',\n        parameters=[\n            PathJoinSubstitution([config_dir, 'robot_config.yaml']),\n            {'robot_name': robot_name},\n            {'use_sim_time': use_sim_time}\n        ],\n        output='screen',\n        respawn=True,\n        respawn_delay=2.0\n    )\n\n    # Sensor processor node\n    sensor_processor_node = Node(\n        package='my_robot_package',\n        executable='sensor_processor',\n        name='sensor_processor',\n        parameters=[\n            PathJoinSubstitution([config_dir, 'sensor_config.yaml']),\n            {'use_sim_time': use_sim_time}\n        ],\n        output='screen',\n        respawn=True\n    )\n\n    # Navigation node\n    navigation_node = Node(\n        package='my_robot_package',\n        executable='navigation_node',\n        name='navigation',\n        parameters=[\n            PathJoinSubstitution([config_dir, 'navigation_config.yaml']),\n            {'use_sim_time': use_sim_time}\n        ],\n        output='screen',\n        respawn=True\n    )\n\n    # RViz2 visualization\n    rviz_node = Node(\n        package='rviz2',\n        executable='rviz2',\n        name='rviz2',\n        arguments=['-d', PathJoinSubstitution([\n            FindPackageShare('my_robot_package'),\n            'rviz',\n            'robot_view.rviz'\n        ])],\n        condition=IfCondition(LaunchConfiguration('enable_rviz', default='true')),\n        output='screen'\n    )\n\n    # Return the launch description\n    return LaunchDescription([\n        declare_use_sim_time,\n        declare_robot_name,\n        declare_config_dir,\n\n        # Launch nodes\n        robot_controller_node,\n        sensor_processor_node,\n        navigation_node,\n        rviz_node,\n    ])\n"})}),"\n",(0,a.jsx)(e.h2,{id:"advanced-launch-file-patterns",children:"Advanced Launch File Patterns"}),"\n",(0,a.jsx)(e.h3,{id:"multi-robot-systems",children:"Multi-Robot Systems"}),"\n",(0,a.jsx)(e.p,{children:"For complex multi-robot scenarios, launch files can manage namespaces and coordination:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"# launch/multi_robot_system.launch.py\nfrom launch import LaunchDescription\nfrom launch.actions import (\n    DeclareLaunchArgument, GroupAction, SetEnvironmentVariable\n)\nfrom launch.conditions import IfCondition\nfrom launch.substitutions import LaunchConfiguration, TextSubstitution\nfrom launch_ros.actions import Node, PushRosNamespace\nfrom launch_ros.descriptions import ParameterFile\nfrom ament_index_python.packages import get_package_share_directory\nimport os\n\ndef generate_launch_description():\n    # Launch arguments for multi-robot system\n    declare_robot1_namespace = DeclareLaunchArgument(\n        'robot1_namespace',\n        default_value='robot1',\n        description='Namespace for robot 1'\n    )\n\n    declare_robot2_namespace = DeclareLaunchArgument(\n        'robot2_namespace',\n        default_value='robot2',\n        description='Namespace for robot 2'\n    )\n\n    declare_use_composition = DeclareLaunchArgument(\n        'use_composition',\n        default_value='false',\n        description='Use composed nodes'\n    )\n\n    declare_composable_nodes = DeclareLaunchArgument(\n        'composable_nodes',\n        default_value='false',\n        description='Use composable nodes'\n    )\n\n    # Get launch configurations\n    robot1_namespace = LaunchConfiguration('robot1_namespace')\n    robot2_namespace = LaunchConfiguration('robot2_namespace')\n    use_composition = LaunchConfiguration('use_composition')\n    composable_nodes = LaunchConfiguration('composable_nodes')\n\n    # Robot 1 group\n    robot1_group = GroupAction(\n        actions=[\n            PushRosNamespace(robot1_namespace),\n            Node(\n                package='my_robot_package',\n                executable='robot_controller',\n                name='controller',\n                parameters=[\n                    {'robot_name': 'robot1'},\n                    {'max_linear_velocity': 0.8}\n                ],\n                output='screen'\n            ),\n            Node(\n                package='my_robot_package',\n                executable='sensor_processor',\n                name='sensor_processor',\n                output='screen'\n            )\n        ]\n    )\n\n    # Robot 2 group\n    robot2_group = GroupAction(\n        actions=[\n            PushRosNamespace(robot2_namespace),\n            Node(\n                package='my_robot_package',\n                executable='robot_controller',\n                name='controller',\n                parameters=[\n                    {'robot_name': 'robot2'},\n                    {'max_linear_velocity': 1.0}\n                ],\n                output='screen'\n            ),\n            Node(\n                package='my_robot_package',\n                executable='sensor_processor',\n                name='sensor_processor',\n                output='screen'\n            )\n        ]\n    )\n\n    # Coordinator node for multi-robot coordination\n    coordinator_node = Node(\n        package='my_robot_package',\n        executable='multi_robot_coordinator',\n        name='multi_robot_coordinator',\n        parameters=[\n            {'robot_names': ['robot1', 'robot2']},\n            {'coordination_strategy': 'distributed'}\n        ],\n        output='screen'\n    )\n\n    return LaunchDescription([\n        declare_robot1_namespace,\n        declare_robot2_namespace,\n        declare_use_composition,\n        declare_composable_nodes,\n\n        robot1_group,\n        robot2_group,\n        coordinator_node,\n    ])\n"})}),"\n",(0,a.jsx)(e.h3,{id:"composable-nodes-launch",children:"Composable Nodes Launch"}),"\n",(0,a.jsx)(e.p,{children:"For performance optimization, ROS 2 supports composable nodes that run in the same process:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"# launch/composable_system.launch.py\nfrom launch import LaunchDescription\nfrom launch_ros.actions import ComposableNodeContainer\nfrom launch_ros.descriptions import ComposableNode\n\ndef generate_launch_description():\n    # Create a container for composable nodes\n    container = ComposableNodeContainer(\n        name='robot_system_container',\n        namespace='',\n        package='rclcpp_components',\n        executable='component_container',\n        composable_node_descriptions=[\n            ComposableNode(\n                package='my_robot_package',\n                plugin='my_robot_package::SensorProcessorComponent',\n                name='sensor_processor',\n                parameters=[\n                    {'sensor_frequency': 50.0},\n                    {'enable_filtering': True}\n                ]\n            ),\n            ComposableNode(\n                package='my_robot_package',\n                plugin='my_robot_package::ControllerComponent',\n                name='controller',\n                parameters=[\n                    {'control_frequency': 100.0},\n                    {'max_velocity': 1.0}\n                ]\n            ),\n            ComposableNode(\n                package='my_robot_package',\n                plugin='my_robot_package::NavigationComponent',\n                name='navigator',\n                parameters=[\n                    {'planning_frequency': 10.0},\n                    {'goal_tolerance': 0.1}\n                ]\n            )\n        ],\n        output='screen',\n    )\n\n    return LaunchDescription([container])\n"})}),"\n",(0,a.jsx)(e.h2,{id:"xml-launch-files",children:"XML Launch Files"}),"\n",(0,a.jsx)(e.p,{children:"While Python is preferred, XML launch files are still supported for simpler configurations:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml",children:'\x3c!-- launch/simple_robot.launch.xml --\x3e\n<launch>\n  <arg name="use_sim_time" default="false"/>\n  <arg name="robot_name" default="default_robot"/>\n\n  <node pkg="my_robot_package" exec="robot_controller" name="robot_controller">\n    <param name="robot_name" value="$(var robot_name)"/>\n    <param name="use_sim_time" value="$(var use_sim_time)"/>\n    <remap from="cmd_vel" to="robot_cmd_vel"/>\n  </node>\n\n  <node pkg="my_robot_package" exec="sensor_processor" name="sensor_processor">\n    <param name="use_sim_time" value="$(var use_sim_time)"/>\n  </node>\n\n  <node pkg="rviz2" exec="rviz2" name="rviz2" required="false">\n    <arg name="display-config" value="$(find-pkg-share my_robot_package)/rviz/default.rviz"/>\n  </node>\n</launch>\n'})}),"\n",(0,a.jsx)(e.h2,{id:"launch-file-best-practices",children:"Launch File Best Practices"}),"\n",(0,a.jsx)(e.h3,{id:"parameter-management-in-launch-files",children:"Parameter Management in Launch Files"}),"\n",(0,a.jsx)(e.p,{children:"Launch files can include parameter files for complex configurations:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"# launch/parameterized_system.launch.py\nfrom launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument, RegisterEventHandler\nfrom launch.substitutions import LaunchConfiguration, PathJoinSubstitution\nfrom launch_ros.actions import Node\nfrom launch_ros.substitutions import FindPackageShare\nfrom launch.event_handlers import OnProcessStart\nimport os\n\ndef generate_launch_description():\n    # Declare launch arguments\n    declare_params_file = DeclareLaunchArgument(\n        'params_file',\n        default_value=PathJoinSubstitution([\n            FindPackageShare('my_robot_package'),\n            'config',\n            'robot_params.yaml'\n        ]),\n        description='Full path to the ROS2 parameters file to use for robot controller nodes'\n    )\n\n    declare_robot_name = DeclareLaunchArgument(\n        'robot_name',\n        default_value='default_robot',\n        description='Name of the robot'\n    )\n\n    # Get launch configurations\n    params_file = LaunchConfiguration('params_file')\n    robot_name = LaunchConfiguration('robot_name')\n\n    # Robot controller with parameter file\n    robot_controller = Node(\n        package='my_robot_package',\n        executable='robot_controller',\n        name='robot_controller',\n        parameters=[\n            params_file,\n            {'robot_name': robot_name}\n        ],\n        output='screen'\n    )\n\n    # Event handler for post-start actions\n    event_handler = RegisterEventHandler(\n        OnProcessStart(\n            target_action=robot_controller,\n            on_start=[\n                # Additional actions after node starts\n            ]\n        )\n    )\n\n    return LaunchDescription([\n        declare_params_file,\n        declare_robot_name,\n        robot_controller,\n        event_handler\n    ])\n"})}),"\n",(0,a.jsx)(e.h3,{id:"conditional-launch",children:"Conditional Launch"}),"\n",(0,a.jsx)(e.p,{children:"Launch files can include conditional logic for flexible system configurations:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"# launch/conditional_system.launch.py\nfrom launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument, IncludeLaunchDescription\nfrom launch.conditions import IfCondition, UnlessCondition\nfrom launch.launch_description_sources import PythonLaunchDescriptionSource\nfrom launch.substitutions import LaunchConfiguration, PathJoinSubstitution\nfrom launch_ros.actions import Node\nfrom launch_ros.substitutions import FindPackageShare\n\ndef generate_launch_description():\n    # Declare launch arguments\n    declare_use_sim = DeclareLaunchArgument(\n        'use_simulation',\n        default_value='false',\n        description='Whether to use simulation'\n    )\n\n    declare_enable_viz = DeclareLaunchArgument(\n        'enable_visualization',\n        default_value='true',\n        description='Whether to enable visualization tools'\n    )\n\n    # Get launch configurations\n    use_sim = LaunchConfiguration('use_simulation')\n    enable_viz = LaunchConfiguration('enable_visualization')\n\n    # Nodes that run in both simulation and real\n    robot_controller = Node(\n        package='my_robot_package',\n        executable='robot_controller',\n        name='robot_controller',\n        condition=UnlessCondition(use_sim),\n        output='screen'\n    )\n\n    # Simulation-specific nodes\n    sim_nodes = IncludeLaunchDescription(\n        PythonLaunchDescriptionSource([\n            PathJoinSubstitution([\n                FindPackageShare('my_robot_gazebo'),\n                'launch',\n                'robot_gazebo.launch.py'\n            ])\n        ]),\n        condition=IfCondition(use_sim)\n    )\n\n    # Visualization nodes (conditional)\n    rviz_node = Node(\n        package='rviz2',\n        executable='rviz2',\n        name='rviz2',\n        condition=IfCondition(enable_viz),\n        output='screen'\n    )\n\n    return LaunchDescription([\n        declare_use_sim,\n        declare_enable_viz,\n        robot_controller,\n        sim_nodes,\n        rviz_node\n    ])\n"})}),"\n",(0,a.jsx)(e.h2,{id:"launch-file-testing-and-validation",children:"Launch File Testing and Validation"}),"\n",(0,a.jsx)(e.h3,{id:"unit-testing-launch-files",children:"Unit Testing Launch Files"}),"\n",(0,a.jsx)(e.p,{children:"Launch files can be tested to ensure they work correctly:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:'# test/test_launch_files.py\nimport unittest\nimport launch\nfrom launch import LaunchDescription\nfrom launch.actions import DeclareLaunchArgument\nfrom launch.substitutions import LaunchConfiguration\nfrom launch_ros.actions import Node\nimport launch_testing\nimport launch_testing.actions\nimport pytest\n\n@pytest.mark.launch_test\ndef generate_test_description():\n    """Generate launch description with all nodes for testing."""\n    robot_controller = Node(\n        package=\'my_robot_package\',\n        executable=\'robot_controller\',\n        name=\'robot_controller_test\',\n        output=\'screen\'\n    )\n\n    return LaunchDescription([\n        robot_controller,\n        launch_testing.actions.ReadyToTest()\n    ])\n\ndef test_nodes_start_successfully():\n    """Test that nodes start successfully."""\n    # This would contain actual test logic\n    assert True\n'})}),"\n",(0,a.jsx)(e.p,{children:"Launch files are a critical component of ROS 2 systems, providing the orchestration layer that brings together multiple nodes and configurations into a cohesive robotic application. Proper use of launch files ensures that complex robotic systems can be started, configured, and managed effectively."})]})}function m(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(u,{...n})}):u(n)}}}]);